### 09 端到端 Agent 用例：表单自动填写

目标：给定一张发票/身份证/收据图片，让Agent读取关键信息并在网页表单中自动填写，最后截图校验。

#### 流程
1) 感知：VLM或OCR读取图片字段（名称、金额、时间等）。
2) 计划：根据目标页面元素提示（占位符/标签），生成“填写步骤”。
3) 执行：Playwright 点击/输入；
4) 验证：再次截图，核对表单值；必要时重试或高亮失败项。

#### 示例请求结构（对接多模态VLM）
```json
{
  "model": "qwen2-vl",
  "messages": [
    {
      "role": "user",
      "content": [
        {"type": "text", "text": "读取发票的抬头、金额、开票日期，返回JSON。"},
        {"type": "image_url", "image_url": {"url": "data:image/png;base64,<...>"}}
      ]
    }
  ]
}
```

#### 工程要点
- 元素定位歧义：结合OCR文本与DOM属性（placeholder/aria-label）双重定位；
- 重试策略：失败后放宽匹配或让LLM返回备选元素线索；
- 审计：记录输入值与截图，便于溯源；
- 隐私：图片与表单数据脱敏与加密传输。


