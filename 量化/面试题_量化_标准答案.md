### 面试题：模型量化（含标准答案）

#### 基础概念
1) 为什么需要量化？
- 答：降低显存/带宽、提升吞吐/并发、降低成本；代价是精度下降，需要校准与评测权衡。

2) 对称与非对称量化的区别？
- 答：对称零点为0，参数少、常用于权重；非对称引入零点适合偏移分布的激活。

3) per-tensor / per-channel / group-wise 有何取舍？
- 答：per-tensor最省但误差大；per-channel精度更好常用于权重；group-wise在INT4常见，平衡存储与精度。

#### PTQ 方法
4) GPTQ与AWQ核心差异？
- 答：GPTQ以最小化输出误差为目标；AWQ根据激活重要性保护关键通道。

5) SmoothQuant解决什么问题？
- 答：降低激活动态范围，便于激活INT8量化，与权重量化配合更稳。

6) 何时选择INT8，何时选择INT4？
- 答：INT8稳健、对质量影响小；INT4显存收益更大但风险更高，适合对质量容忍度更高或可QAT的场景。

#### QAT
7) QAT的优势与成本？
- 答：优势是低比特精度更稳；成本是训练时间与数据需求增加，工程复杂。

8) 蒸馏如何帮助量化？
- 答：用全精度教师指导量化学生，缓解性能退化并稳定训练。

#### 工程与评测
9) 线上性能没有提升的可能原因？
- 答：数据搬运与采样在CPU端瓶颈、内核不支持、批处理策略不当、上下文过长导致KV占用大。

10) 如何制定上线门槛？
- 答：设定与全精度基线的质量阈值（如偏好差≤X%），结合P95延迟与tokens/s提升比例，灰度A/B并设置回滚阈值。

#### 开放题
11) 给出一个针对中文问答业务的量化方案与验证流程。
- 参考答案要点：
  - 选择AWQ/GPTQ两条路线做小样本比较（1000个真实请求），
  - 指标涵盖偏好评测/拒绝率/延迟/成本，
  - 若INT4退化明显，引入QAT或退回INT8，
  - 上线灰度10%流量一周观察，达标再放量。


